Let's analyze the question and the related TTPs step-by-step:

1. **Analyze the Question:**
   - The sequence involves malware achieving persistence by adding files to registry run keys and startup folders.
   - This persistence is followed by the malware performing discovery by querying the registry and identifying victim machines.

2. **Analyze the Related TTPs:**
   - **Tactic: Discovery, Technique: T1012-Query Registry**: This technique involves the malware querying the registry to gather information about the system.
   - **Tactic: Privilege Escalation, Technique: T1547.001-Registry Run Keys / Startup Folder**: This technique involves the malware adding files to registry run keys and startup folders to achieve persistence.
   - **Tactic: Persistence, Technique: T1547.001-Registry Run Keys / Startup Folder**: This technique is the same as the one mentioned in the question for achieving persistence.

3. **Compare and Evaluate:**
   - The question states that persistence is achieved by adding files to registry run keys and startup folders. This aligns with the TTP "T1547.001-Registry Run Keys / Startup Folder" under the Persistence tactic.
   - After persistence is achieved, the malware performs discovery by querying the registry. This aligns with the TTP "T1012-Query Registry" under the Discovery tactic.

4. **Step-by-Step Reasoning:**
   - The malware first achieves persistence by adding files to registry run keys and startup folders (Persistence tactic).
   - After achieving persistence, the malware performs discovery by querying the registry (Discovery tactic).

5. **Final Answer:**
   - The correct sequence of TTPs is Persistence followed by Discovery.
   - Among the given answer choices, the Persistence tactic is directly mentioned in the question and the related TTPs.

Final Answer: D: Persistence