To answer this question, let's break down the information provided in the CTI report and analyze the sequence of tactics, techniques, and procedures (TTPs) used by the Moafee and DragonOK groups.

1. **Analysis of the CTI Report**:
   - **Reconnaissance**: The groups use similar TTPs, including custom-built backdoors and RATs, and publicly available tools.
   - **Initial Access**: The primary attack vector is spear-phishing emails with tailored attachments.
   - **Execution**: The groups use evasion techniques, including environment-based evasion (like CPU core checks) to detect and avoid sandbox environments.
   - **Persistence**: Registry entries are used for startup persistence.
   - **Defense Evasion**: Techniques include environment-based evasion, large file sizes, and password-protected documents to evade detection.
   - **Command and Control**: The backdoors and RATs use specific communication methods, including network beacons with hardcoded header values and encrypted data.

2. **Analysis of the Question**:
   - The question asks if, after gaining initial access via spear-phishing, Moafee and DragonOK will use custom-built backdoors and RATs only after employing environment-based evasion techniques like CPU core checks to execute their payloads.

3. **Comparison and Evaluation**:
   - The CTI report indicates that the groups use spear-phishing as the initial access vector.
   - Upon execution, they employ evasion techniques, including the CPU core check, to avoid detection in virtualized environments.
   - The use of custom-built backdoors and RATs (like CT/NewCT) is mentioned as part of maintaining access to victim networks, which implies these tools are utilized after initial access and potentially after evasion techniques have been successfully executed to ensure the environment is suitable for further exploitation.

4. **Step-by-Step Reasoning**:
   - **Step 1**: Moafee and DragonOK use spear-phishing emails to gain initial access.
   - **Step 2**: Upon execution, they use environment-based evasion techniques, such as CPU core checks, to detect and avoid sandbox environments.
   - **Step 3**: After determining the environment is not a sandbox (based on the evasion techniques), they proceed with the deployment of custom-built backdoors and RATs to maintain access and execute further malicious activities.

Given this sequence, it is reasonable to conclude that the use of custom-built backdoors and RATs by Moafee and DragonOK occurs after they have employed environment-based evasion techniques to ensure they are operating in a non-virtualized environment. This suggests a strategic approach to evade detection and ensure the longevity of their access to the compromised networks.

**Final Answer: A**